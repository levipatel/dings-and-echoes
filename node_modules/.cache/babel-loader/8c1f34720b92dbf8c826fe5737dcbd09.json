{"ast":null,"code":"import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nexport var createNativeConstantSourceNodeFactory = function createNativeConstantSourceNodeFactory(addSilentConnection, cacheTestResult, createNativeAudioNode, createNativeConstantSourceNodeFaker, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport) {\n  return function (nativeContext, options) {\n    // Bug #62: Edge & Safari do not support ConstantSourceNodes.\n    if (nativeContext.createConstantSource === undefined) {\n      return createNativeConstantSourceNodeFaker(nativeContext, options);\n    }\n\n    var nativeConstantSourceNode = createNativeAudioNode(nativeContext, function (ntvCntxt) {\n      return ntvCntxt.createConstantSource();\n    });\n    assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\n    assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset'); // Bug #44: Only Chrome, Firefox & Opera throw a RangeError yet.\n\n    if (!cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, function () {\n      return testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext);\n    })) {\n      wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\n    } // Bug #44: Only Firefox does not throw a RangeError yet.\n\n\n    if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, function () {\n      return testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext);\n    })) {\n      wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\n    } // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\n\n\n    addSilentConnection(nativeContext, nativeConstantSourceNode);\n    return nativeConstantSourceNode;\n  };\n};","map":{"version":3,"sources":["../../../src/factories/native-constant-source-node-factory.ts"],"names":[],"mappings":"AAAA,SAAS,oCAAT,QAAqD,uDAArD;AACA,SAAS,4BAAT,QAA6C,6CAA7C;AACA,SAAS,yDAAT,QAA0E,8EAA1E;AACA,SAAS,wDAAT,QAAyE,6EAAzE;AAGA,OAAO,IAAM,qCAAqC,GAA4C,SAAjF,qCAAiF,CAC1F,mBAD0F,EAE1F,eAF0F,EAG1F,qBAH0F,EAI1F,mCAJ0F,EAK1F,gEAL0F,EAM1F,+DAN0F,EAO1F;AACA,SAAO,UAAC,aAAD,EAAgB,OAAhB,EAA2B;AAC9B;AACA,QAAI,aAAa,CAAC,oBAAd,KAAuC,SAA3C,EAAsD;AAClD,aAAO,mCAAmC,CAAC,aAAD,EAAgB,OAAhB,CAA1C;AACH;;AAED,QAAM,wBAAwB,GAAG,qBAAqB,CAAC,aAAD,EAAgB,UAAC,QAAD,EAAa;AAC/E,aAAO,QAAQ,CAAC,oBAAT,EAAP;AACH,KAFqD,CAAtD;AAIA,IAAA,4BAA4B,CAAC,wBAAD,EAA2B,OAA3B,CAA5B;AAEA,IAAA,oCAAoC,CAAC,wBAAD,EAA2B,OAA3B,EAAoC,QAApC,CAApC,CAZ8B,CAc9B;;AACA,QACI,CAAC,eAAe,CAAC,gEAAD,EAAmE;AAAA,aAC/E,gEAAgE,CAAC,aAAD,CADe;AAAA,KAAnE,CADpB,EAIE;AACE,MAAA,yDAAyD,CAAC,wBAAD,CAAzD;AACH,KArB6B,CAuB9B;;;AACA,QACI,CAAC,eAAe,CAAC,+DAAD,EAAkE;AAAA,aAC9E,+DAA+D,CAAC,aAAD,CADe;AAAA,KAAlE,CADpB,EAIE;AACE,MAAA,wDAAwD,CAAC,wBAAD,CAAxD;AACH,KA9B6B,CAgC9B;;;AACA,IAAA,mBAAmB,CAAC,aAAD,EAAgB,wBAAhB,CAAnB;AAEA,WAAO,wBAAP;AACH,GApCD;AAqCH,CA7CM","sourceRoot":"","sourcesContent":["import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nexport const createNativeConstantSourceNodeFactory = (addSilentConnection, cacheTestResult, createNativeAudioNode, createNativeConstantSourceNodeFaker, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport) => {\n    return (nativeContext, options) => {\n        // Bug #62: Edge & Safari do not support ConstantSourceNodes.\n        if (nativeContext.createConstantSource === undefined) {\n            return createNativeConstantSourceNodeFaker(nativeContext, options);\n        }\n        const nativeConstantSourceNode = createNativeAudioNode(nativeContext, (ntvCntxt) => {\n            return ntvCntxt.createConstantSource();\n        });\n        assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\n        assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset');\n        // Bug #44: Only Chrome, Firefox & Opera throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\n        }\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\n        }\n        // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeConstantSourceNode);\n        return nativeConstantSourceNode;\n    };\n};\n//# sourceMappingURL=native-constant-source-node-factory.js.map"]},"metadata":{},"sourceType":"module"}