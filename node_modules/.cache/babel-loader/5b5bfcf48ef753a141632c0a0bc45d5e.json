{"ast":null,"code":"import _toConsumableArray from \"/Users/levipatel/Github/DingsAndEchoes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/levipatel/Github/DingsAndEchoes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/Users/levipatel/Github/DingsAndEchoes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nexport var createNativePannerNodeFakerFactory = function createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode, createInvalidStateError, createNativeAudioNode, createNativeChannelMergerNode, createNativeGainNode, createNativeScriptProcessorNode, createNativeWaveShaperNode, createNotSupportedError, disconnectNativeAudioNodeFromNativeAudioNode, monitorConnections) {\n  return function (nativeContext, _ref) {\n    var coneInnerAngle = _ref.coneInnerAngle,\n        coneOuterAngle = _ref.coneOuterAngle,\n        coneOuterGain = _ref.coneOuterGain,\n        distanceModel = _ref.distanceModel,\n        maxDistance = _ref.maxDistance,\n        orientationX = _ref.orientationX,\n        orientationY = _ref.orientationY,\n        orientationZ = _ref.orientationZ,\n        panningModel = _ref.panningModel,\n        positionX = _ref.positionX,\n        positionY = _ref.positionY,\n        positionZ = _ref.positionZ,\n        refDistance = _ref.refDistance,\n        rolloffFactor = _ref.rolloffFactor,\n        audioNodeOptions = _objectWithoutProperties(_ref, [\"coneInnerAngle\", \"coneOuterAngle\", \"coneOuterGain\", \"distanceModel\", \"maxDistance\", \"orientationX\", \"orientationY\", \"orientationZ\", \"panningModel\", \"positionX\", \"positionY\", \"positionZ\", \"refDistance\", \"rolloffFactor\"]);\n\n    var pannerNode = createNativeAudioNode(nativeContext, function (ntvCntxt) {\n      return ntvCntxt.createPanner();\n    }); // Bug #125: Safari does not throw an error yet.\n\n    if (audioNodeOptions.channelCount > 2) {\n      throw createNotSupportedError();\n    } // Bug #126: Safari does not throw an error yet.\n\n\n    if (audioNodeOptions.channelCountMode === 'max') {\n      throw createNotSupportedError();\n    }\n\n    assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\n    var SINGLE_CHANNEL_OPTIONS = {\n      channelCount: 1,\n      channelCountMode: 'explicit',\n      channelInterpretation: 'discrete'\n    };\n    var channelMergerNode = createNativeChannelMergerNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      channelInterpretation: 'speakers',\n      numberOfInputs: 6\n    }));\n    var inputGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, audioNodeOptions), {}, {\n      gain: 1\n    }));\n    var orientationXGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 1\n    }));\n    var orientationYGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 0\n    }));\n    var orientationZGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 0\n    }));\n    var positionXGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 0\n    }));\n    var positionYGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 0\n    }));\n    var positionZGainNode = createNativeGainNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      gain: 0\n    }));\n    var scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\n    var waveShaperNode = createNativeWaveShaperNode(nativeContext, _objectSpread(_objectSpread({}, SINGLE_CHANNEL_OPTIONS), {}, {\n      curve: new Float32Array([1, 1]),\n      oversample: 'none'\n    }));\n    var lastOrientation = [orientationX, orientationY, orientationZ];\n    var lastPosition = [positionX, positionY, positionZ]; // tslint:disable-next-line:deprecation\n\n    scriptProcessorNode.onaudioprocess = function (_ref2) {\n      var inputBuffer = _ref2.inputBuffer;\n      var orientation = [inputBuffer.getChannelData(0)[0], inputBuffer.getChannelData(1)[0], inputBuffer.getChannelData(2)[0]];\n\n      if (orientation.some(function (value, index) {\n        return value !== lastOrientation[index];\n      })) {\n        pannerNode.setOrientation.apply(pannerNode, orientation); // tslint:disable-line:deprecation\n\n        lastOrientation = orientation;\n      }\n\n      var positon = [inputBuffer.getChannelData(3)[0], inputBuffer.getChannelData(4)[0], inputBuffer.getChannelData(5)[0]];\n\n      if (positon.some(function (value, index) {\n        return value !== lastPosition[index];\n      })) {\n        pannerNode.setPosition.apply(pannerNode, positon); // tslint:disable-line:deprecation\n\n        lastPosition = positon;\n      }\n    };\n\n    Object.defineProperty(orientationYGainNode.gain, 'defaultValue', {\n      get: function get() {\n        return 0;\n      }\n    });\n    Object.defineProperty(orientationZGainNode.gain, 'defaultValue', {\n      get: function get() {\n        return 0;\n      }\n    });\n    Object.defineProperty(positionXGainNode.gain, 'defaultValue', {\n      get: function get() {\n        return 0;\n      }\n    });\n    Object.defineProperty(positionYGainNode.gain, 'defaultValue', {\n      get: function get() {\n        return 0;\n      }\n    });\n    Object.defineProperty(positionZGainNode.gain, 'defaultValue', {\n      get: function get() {\n        return 0;\n      }\n    });\n    var nativePannerNodeFaker = {\n      get bufferSize() {\n        return undefined;\n      },\n\n      get channelCount() {\n        return pannerNode.channelCount;\n      },\n\n      set channelCount(value) {\n        // Bug #125: Safari does not throw an error yet.\n        if (value > 2) {\n          throw createNotSupportedError();\n        }\n\n        inputGainNode.channelCount = value;\n        pannerNode.channelCount = value;\n      },\n\n      get channelCountMode() {\n        return pannerNode.channelCountMode;\n      },\n\n      set channelCountMode(value) {\n        // Bug #126: Safari does not throw an error yet.\n        if (value === 'max') {\n          throw createNotSupportedError();\n        }\n\n        inputGainNode.channelCountMode = value;\n        pannerNode.channelCountMode = value;\n      },\n\n      get channelInterpretation() {\n        return pannerNode.channelInterpretation;\n      },\n\n      set channelInterpretation(value) {\n        inputGainNode.channelInterpretation = value;\n        pannerNode.channelInterpretation = value;\n      },\n\n      get coneInnerAngle() {\n        return pannerNode.coneInnerAngle;\n      },\n\n      set coneInnerAngle(value) {\n        pannerNode.coneInnerAngle = value;\n      },\n\n      get coneOuterAngle() {\n        return pannerNode.coneOuterAngle;\n      },\n\n      set coneOuterAngle(value) {\n        pannerNode.coneOuterAngle = value;\n      },\n\n      get coneOuterGain() {\n        return pannerNode.coneOuterGain;\n      },\n\n      set coneOuterGain(value) {\n        // Bug #127: Edge & Safari do not throw an InvalidStateError yet.\n        if (value < 0 || value > 1) {\n          throw createInvalidStateError();\n        }\n\n        pannerNode.coneOuterGain = value;\n      },\n\n      get context() {\n        return pannerNode.context;\n      },\n\n      get distanceModel() {\n        return pannerNode.distanceModel;\n      },\n\n      set distanceModel(value) {\n        pannerNode.distanceModel = value;\n      },\n\n      get inputs() {\n        return [inputGainNode];\n      },\n\n      get maxDistance() {\n        return pannerNode.maxDistance;\n      },\n\n      set maxDistance(value) {\n        // Bug #128: Edge & Safari do not throw an error yet.\n        if (value < 0) {\n          throw new RangeError();\n        }\n\n        pannerNode.maxDistance = value;\n      },\n\n      get numberOfInputs() {\n        return pannerNode.numberOfInputs;\n      },\n\n      get numberOfOutputs() {\n        return pannerNode.numberOfOutputs;\n      },\n\n      get orientationX() {\n        return orientationXGainNode.gain;\n      },\n\n      get orientationY() {\n        return orientationYGainNode.gain;\n      },\n\n      get orientationZ() {\n        return orientationZGainNode.gain;\n      },\n\n      get panningModel() {\n        return pannerNode.panningModel;\n      },\n\n      set panningModel(value) {\n        pannerNode.panningModel = value; // Bug #123: Edge does not support HRTF as panningModel.\n\n        if (pannerNode.panningModel !== value && value === 'HRTF') {\n          throw createNotSupportedError();\n        }\n      },\n\n      get positionX() {\n        return positionXGainNode.gain;\n      },\n\n      get positionY() {\n        return positionYGainNode.gain;\n      },\n\n      get positionZ() {\n        return positionZGainNode.gain;\n      },\n\n      get refDistance() {\n        return pannerNode.refDistance;\n      },\n\n      set refDistance(value) {\n        // Bug #129: Edge & Safari do not throw an error yet.\n        if (value < 0) {\n          throw new RangeError();\n        }\n\n        pannerNode.refDistance = value;\n      },\n\n      get rolloffFactor() {\n        return pannerNode.rolloffFactor;\n      },\n\n      set rolloffFactor(value) {\n        // Bug #130: Edge & Safari do not throw an error yet.\n        if (value < 0) {\n          throw new RangeError();\n        }\n\n        pannerNode.rolloffFactor = value;\n      },\n\n      addEventListener: function addEventListener() {\n        return inputGainNode.addEventListener(arguments.length <= 0 ? undefined : arguments[0], arguments.length <= 1 ? undefined : arguments[1], arguments.length <= 2 ? undefined : arguments[2]);\n      },\n      dispatchEvent: function dispatchEvent() {\n        return inputGainNode.dispatchEvent(arguments.length <= 0 ? undefined : arguments[0]);\n      },\n      removeEventListener: function removeEventListener() {\n        return inputGainNode.removeEventListener(arguments.length <= 0 ? undefined : arguments[0], arguments.length <= 1 ? undefined : arguments[1], arguments.length <= 2 ? undefined : arguments[2]);\n      }\n    };\n\n    if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\n      nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\n    }\n\n    if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\n      nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\n    }\n\n    if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\n      nativePannerNodeFaker.coneOuterGain = coneOuterGain;\n    }\n\n    if (distanceModel !== nativePannerNodeFaker.distanceModel) {\n      nativePannerNodeFaker.distanceModel = distanceModel;\n    }\n\n    if (maxDistance !== nativePannerNodeFaker.maxDistance) {\n      nativePannerNodeFaker.maxDistance = maxDistance;\n    }\n\n    if (orientationX !== nativePannerNodeFaker.orientationX.value) {\n      nativePannerNodeFaker.orientationX.value = orientationX;\n    }\n\n    if (orientationY !== nativePannerNodeFaker.orientationY.value) {\n      nativePannerNodeFaker.orientationY.value = orientationY;\n    }\n\n    if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\n      nativePannerNodeFaker.orientationZ.value = orientationZ;\n    }\n\n    if (panningModel !== nativePannerNodeFaker.panningModel) {\n      nativePannerNodeFaker.panningModel = panningModel;\n    }\n\n    if (positionX !== nativePannerNodeFaker.positionX.value) {\n      nativePannerNodeFaker.positionX.value = positionX;\n    }\n\n    if (positionY !== nativePannerNodeFaker.positionY.value) {\n      nativePannerNodeFaker.positionY.value = positionY;\n    }\n\n    if (positionZ !== nativePannerNodeFaker.positionZ.value) {\n      nativePannerNodeFaker.positionZ.value = positionZ;\n    }\n\n    if (refDistance !== nativePannerNodeFaker.refDistance) {\n      nativePannerNodeFaker.refDistance = refDistance;\n    }\n\n    if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\n      nativePannerNodeFaker.rolloffFactor = rolloffFactor;\n    }\n\n    if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\n      pannerNode.setOrientation.apply(pannerNode, _toConsumableArray(lastOrientation)); // tslint:disable-line:deprecation\n    }\n\n    if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\n      pannerNode.setPosition.apply(pannerNode, _toConsumableArray(lastPosition)); // tslint:disable-line:deprecation\n    }\n\n    var whenConnected = function whenConnected() {\n      inputGainNode.connect(pannerNode); // Bug #119: Safari does not fully support the WaveShaperNode.\n\n      connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n      waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\n      waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\n      waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\n      waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\n      waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\n      waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\n      channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\n    };\n\n    var whenDisconnected = function whenDisconnected() {\n      inputGainNode.disconnect(pannerNode); // Bug #119: Safari does not fully support the WaveShaperNode.\n\n      disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n      waveShaperNode.disconnect(orientationXGainNode);\n      orientationXGainNode.disconnect(channelMergerNode);\n      waveShaperNode.disconnect(orientationYGainNode);\n      orientationYGainNode.disconnect(channelMergerNode);\n      waveShaperNode.disconnect(orientationZGainNode);\n      orientationZGainNode.disconnect(channelMergerNode);\n      waveShaperNode.disconnect(positionXGainNode);\n      positionXGainNode.disconnect(channelMergerNode);\n      waveShaperNode.disconnect(positionYGainNode);\n      positionYGainNode.disconnect(channelMergerNode);\n      waveShaperNode.disconnect(positionZGainNode);\n      positionZGainNode.disconnect(channelMergerNode);\n      channelMergerNode.disconnect(scriptProcessorNode);\n      scriptProcessorNode.disconnect(nativeContext.destination);\n    };\n\n    return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\n  };\n};","map":{"version":3,"sources":["../../../src/factories/native-panner-node-faker-factory.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nexport const createNativePannerNodeFakerFactory = (connectNativeAudioNodeToNativeAudioNode, createInvalidStateError, createNativeAudioNode, createNativeChannelMergerNode, createNativeGainNode, createNativeScriptProcessorNode, createNativeWaveShaperNode, createNotSupportedError, disconnectNativeAudioNodeFromNativeAudioNode, monitorConnections) => {\n    return (nativeContext, { coneInnerAngle, coneOuterAngle, coneOuterGain, distanceModel, maxDistance, orientationX, orientationY, orientationZ, panningModel, positionX, positionY, positionZ, refDistance, rolloffFactor, ...audioNodeOptions }) => {\n        const pannerNode = createNativeAudioNode(nativeContext, (ntvCntxt) => ntvCntxt.createPanner());\n        // Bug #125: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n        // Bug #126: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\n        const SINGLE_CHANNEL_OPTIONS = {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete'\n        };\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            channelInterpretation: 'speakers',\n            numberOfInputs: 6\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const orientationXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 1 });\n        const orientationYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const orientationZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\n        const waveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            curve: new Float32Array([1, 1]),\n            oversample: 'none'\n        });\n        let lastOrientation = [orientationX, orientationY, orientationZ];\n        let lastPosition = [positionX, positionY, positionZ];\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n            const orientation = [\n                inputBuffer.getChannelData(0)[0],\n                inputBuffer.getChannelData(1)[0],\n                inputBuffer.getChannelData(2)[0]\n            ];\n            if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                pannerNode.setOrientation(...orientation); // tslint:disable-line:deprecation\n                lastOrientation = orientation;\n            }\n            const positon = [\n                inputBuffer.getChannelData(3)[0],\n                inputBuffer.getChannelData(4)[0],\n                inputBuffer.getChannelData(5)[0]\n            ];\n            if (positon.some((value, index) => value !== lastPosition[index])) {\n                pannerNode.setPosition(...positon); // tslint:disable-line:deprecation\n                lastPosition = positon;\n            }\n        };\n        Object.defineProperty(orientationYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(orientationZGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionXGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionZGainNode.gain, 'defaultValue', { get: () => 0 });\n        const nativePannerNodeFaker = {\n            get bufferSize() {\n                return undefined;\n            },\n            get channelCount() {\n                return pannerNode.channelCount;\n            },\n            set channelCount(value) {\n                // Bug #125: Safari does not throw an error yet.\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n                inputGainNode.channelCount = value;\n                pannerNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return pannerNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                // Bug #126: Safari does not throw an error yet.\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n                inputGainNode.channelCountMode = value;\n                pannerNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return pannerNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                pannerNode.channelInterpretation = value;\n            },\n            get coneInnerAngle() {\n                return pannerNode.coneInnerAngle;\n            },\n            set coneInnerAngle(value) {\n                pannerNode.coneInnerAngle = value;\n            },\n            get coneOuterAngle() {\n                return pannerNode.coneOuterAngle;\n            },\n            set coneOuterAngle(value) {\n                pannerNode.coneOuterAngle = value;\n            },\n            get coneOuterGain() {\n                return pannerNode.coneOuterGain;\n            },\n            set coneOuterGain(value) {\n                // Bug #127: Edge & Safari do not throw an InvalidStateError yet.\n                if (value < 0 || value > 1) {\n                    throw createInvalidStateError();\n                }\n                pannerNode.coneOuterGain = value;\n            },\n            get context() {\n                return pannerNode.context;\n            },\n            get distanceModel() {\n                return pannerNode.distanceModel;\n            },\n            set distanceModel(value) {\n                pannerNode.distanceModel = value;\n            },\n            get inputs() {\n                return [inputGainNode];\n            },\n            get maxDistance() {\n                return pannerNode.maxDistance;\n            },\n            set maxDistance(value) {\n                // Bug #128: Edge & Safari do not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.maxDistance = value;\n            },\n            get numberOfInputs() {\n                return pannerNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return pannerNode.numberOfOutputs;\n            },\n            get orientationX() {\n                return orientationXGainNode.gain;\n            },\n            get orientationY() {\n                return orientationYGainNode.gain;\n            },\n            get orientationZ() {\n                return orientationZGainNode.gain;\n            },\n            get panningModel() {\n                return pannerNode.panningModel;\n            },\n            set panningModel(value) {\n                pannerNode.panningModel = value;\n                // Bug #123: Edge does not support HRTF as panningModel.\n                if (pannerNode.panningModel !== value && value === 'HRTF') {\n                    throw createNotSupportedError();\n                }\n            },\n            get positionX() {\n                return positionXGainNode.gain;\n            },\n            get positionY() {\n                return positionYGainNode.gain;\n            },\n            get positionZ() {\n                return positionZGainNode.gain;\n            },\n            get refDistance() {\n                return pannerNode.refDistance;\n            },\n            set refDistance(value) {\n                // Bug #129: Edge & Safari do not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.refDistance = value;\n            },\n            get rolloffFactor() {\n                return pannerNode.rolloffFactor;\n            },\n            set rolloffFactor(value) {\n                // Bug #130: Edge & Safari do not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.rolloffFactor = value;\n            },\n            addEventListener(...args) {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\n            nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\n        }\n        if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\n            nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\n        }\n        if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\n            nativePannerNodeFaker.coneOuterGain = coneOuterGain;\n        }\n        if (distanceModel !== nativePannerNodeFaker.distanceModel) {\n            nativePannerNodeFaker.distanceModel = distanceModel;\n        }\n        if (maxDistance !== nativePannerNodeFaker.maxDistance) {\n            nativePannerNodeFaker.maxDistance = maxDistance;\n        }\n        if (orientationX !== nativePannerNodeFaker.orientationX.value) {\n            nativePannerNodeFaker.orientationX.value = orientationX;\n        }\n        if (orientationY !== nativePannerNodeFaker.orientationY.value) {\n            nativePannerNodeFaker.orientationY.value = orientationY;\n        }\n        if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\n            nativePannerNodeFaker.orientationZ.value = orientationZ;\n        }\n        if (panningModel !== nativePannerNodeFaker.panningModel) {\n            nativePannerNodeFaker.panningModel = panningModel;\n        }\n        if (positionX !== nativePannerNodeFaker.positionX.value) {\n            nativePannerNodeFaker.positionX.value = positionX;\n        }\n        if (positionY !== nativePannerNodeFaker.positionY.value) {\n            nativePannerNodeFaker.positionY.value = positionY;\n        }\n        if (positionZ !== nativePannerNodeFaker.positionZ.value) {\n            nativePannerNodeFaker.positionZ.value = positionZ;\n        }\n        if (refDistance !== nativePannerNodeFaker.refDistance) {\n            nativePannerNodeFaker.refDistance = refDistance;\n        }\n        if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\n            nativePannerNodeFaker.rolloffFactor = rolloffFactor;\n        }\n        if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\n            pannerNode.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n        }\n        if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\n            pannerNode.setPosition(...lastPosition); // tslint:disable-line:deprecation\n        }\n        const whenConnected = () => {\n            inputGainNode.connect(pannerNode);\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n            waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\n            waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\n            waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\n            waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\n            waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\n            waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\n            channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(pannerNode);\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n            waveShaperNode.disconnect(orientationXGainNode);\n            orientationXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationYGainNode);\n            orientationYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationZGainNode);\n            orientationZGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionXGainNode);\n            positionXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionYGainNode);\n            positionYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionZGainNode);\n            positionZGainNode.disconnect(channelMergerNode);\n            channelMergerNode.disconnect(scriptProcessorNode);\n            scriptProcessorNode.disconnect(nativeContext.destination);\n        };\n        return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-panner-node-faker-factory.js.map"]},"metadata":{},"sourceType":"module"}